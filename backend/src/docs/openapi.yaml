openapi: 3.0.3
info:
  title: EnduranceHub API
  version: 1.0.0
  description: REST API for managing athletes, training and nutrition plans within the EnduranceHub platform.
servers:
  - url: http://localhost:4000/api
    description: Local development server
tags:
  - name: Auth
    description: Authentication endpoints
  - name: Athletes
    description: Manage athlete profiles and related plans
  - name: Training Plans
    description: Create and manage training plans
  - name: Nutrition Plans
    description: Create and manage nutrition plans
  - name: Messages
    description: Internal communication between team members
paths:
  /auth/register:
    post:
      tags: [Auth]
      summary: Register a new user
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RegisterRequest'
    responses:
      '201':
        description: User registered successfully
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AuthResponse'
      '400':
        $ref: '#/components/responses/ValidationError'
      '409':
        description: Email already registered
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ErrorResponse'
            examples:
              conflict:
                value:
                  message: Email is already registered
/auth/login:
  post:
    tags: [Auth]
    summary: Authenticate a user
    requestBody:
      required: true
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/LoginRequest'
      responses:
        '200':
          description: Authenticated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AuthResponse'
        '400':
          $ref: '#/components/responses/ValidationError'
        '401':
          description: Invalid credentials
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              examples:
                unauthorized:
                  value:
                    message: Invalid credentials
/auth/refresh:
  post:
    tags: [Auth]
    summary: Refresh authentication tokens
    requestBody:
      required: true
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/RefreshRequest'
    responses:
      '200':
        description: Tokens refreshed
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RefreshResponse'
      '400':
        $ref: '#/components/responses/ValidationError'
      '401':
        description: Invalid refresh token
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ErrorResponse'
            examples:
              unauthorized:
                value:
                  message: Invalid refresh token
/auth/logout:
  post:
    tags: [Auth]
    summary: Revoke a refresh token
    requestBody:
      required: true
      content:
        application/json:
            schema:
              $ref: '#/components/schemas/RefreshRequest'
    responses:
      '204':
        description: Token revoked
      '400':
        $ref: '#/components/responses/ValidationError'
/auth/me:
  get:
    tags: [Auth]
    summary: Get current user profile
    security:
      - bearerAuth: []
    responses:
      '200':
        description: Authenticated user info
        content:
          application/json:
            schema:
              type: object
              properties:
                user:
                  $ref: '#/components/schemas/UserSummary'
      '401':
        $ref: '#/components/responses/UnauthorizedError'
/athletes:
  get:
    tags: [Athletes]
    summary: List athletes
    security:
      - bearerAuth: []
    parameters:
      - in: query
        name: userId
        schema:
          type: integer
        description: Filter by related user id (admin/specialist only)
    responses:
      '200':
        description: Collection of athletes
        content:
          application/json:
            schema:
              type: object
              properties:
                athletes:
                  type: array
                  items:
                    $ref: '#/components/schemas/Athlete'
      '401':
        $ref: '#/components/responses/UnauthorizedError'
  post:
    tags: [Athletes]
    summary: Create athlete profile
    security:
      - bearerAuth: []
    requestBody:
      required: true
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/AthleteCreateRequest'
    responses:
      '201':
        description: Athlete created
        content:
          application/json:
            schema:
              type: object
              properties:
                athlete:
                  $ref: '#/components/schemas/Athlete'
      '400':
        $ref: '#/components/responses/ValidationError'
      '401':
        $ref: '#/components/responses/UnauthorizedError'
      '403':
        $ref: '#/components/responses/ForbiddenError'
      '404':
        description: Related user not found
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ErrorResponse'
            examples:
              missingUser:
                value:
                  message: User not found
      '409':
        description: Athlete profile already exists
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ErrorResponse'
            examples:
              duplicate:
                value:
                  message: Athlete profile already exists for this user
      '422':
        description: User role is incompatible with athlete profile
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ErrorResponse'
            examples:
              invalidRole:
                value:
                  message: User role must be ATHLETE to create an athlete profile
/athletes/{id}:
  get:
    tags: [Athletes]
    summary: Get athlete details
    security:
      - bearerAuth: []
    parameters:
      - $ref: '#/components/parameters/AthleteId'
    responses:
      '200':
        description: Athlete info
        content:
          application/json:
            schema:
              type: object
              properties:
                athlete:
                  $ref: '#/components/schemas/AthleteExpanded'
      '404':
        description: Athlete not found
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ErrorResponse'
            examples:
              missing:
                value:
                  message: Athlete not found
      '401':
        $ref: '#/components/responses/UnauthorizedError'
      '403':
        description: Attempt to access athlete without permission
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ErrorResponse'
            examples:
              forbidden:
                value:
                  message: Cannot access another athlete profile
  put:
    tags: [Athletes]
    summary: Update athlete profile
    security:
      - bearerAuth: []
    parameters:
      - $ref: '#/components/parameters/AthleteId'
    requestBody:
      required: true
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/AthleteUpdateRequest'
    responses:
      '200':
        description: Updated athlete
        content:
          application/json:
            schema:
              type: object
              properties:
                athlete:
                  $ref: '#/components/schemas/Athlete'
      '400':
        $ref: '#/components/responses/ValidationError'
      '401':
        $ref: '#/components/responses/UnauthorizedError'
      '403':
        description: Attempt to update athlete without permission
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ErrorResponse'
            examples:
              forbidden:
                value:
                  message: Cannot update another athlete profile
      '404':
        description: Athlete not found
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ErrorResponse'
            examples:
              missing:
                value:
                  message: Athlete not found
  delete:
    tags: [Athletes]
    summary: Remove athlete profile
    security:
      - bearerAuth: []
    parameters:
      - $ref: '#/components/parameters/AthleteId'
    responses:
      '204':
        description: Deleted
      '401':
        $ref: '#/components/responses/UnauthorizedError'
      '403':
        $ref: '#/components/responses/ForbiddenError'
      '404':
        description: Athlete not found
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ErrorResponse'
            examples:
              missing:
                value:
                  message: Athlete not found
/athletes/{id}/training-plans:
  get:
    tags: [Athletes, Training Plans]
    summary: List training plans for athlete
    security:
      - bearerAuth: []
    parameters:
      - $ref: '#/components/parameters/AthleteId'
    responses:
      '200':
        description: Training plans
        content:
          application/json:
            schema:
              type: object
              properties:
                trainingPlans:
                  type: array
                  items:
                    $ref: '#/components/schemas/TrainingPlan'
      '401':
        $ref: '#/components/responses/UnauthorizedError'
/athletes/{id}/nutrition-plans:
  get:
    tags: [Athletes, Nutrition Plans]
    summary: List nutrition plans for athlete
    security:
      - bearerAuth: []
    parameters:
      - $ref: '#/components/parameters/AthleteId'
    responses:
      '200':
        description: Nutrition plans
        content:
          application/json:
            schema:
              type: object
              properties:
                nutritionPlans:
                  type: array
                  items:
                    $ref: '#/components/schemas/NutritionPlan'
      '401':
        $ref: '#/components/responses/UnauthorizedError'
/training-plans:
  get:
    tags: [Training Plans]
    summary: List training plans
    security:
      - bearerAuth: []
    parameters:
      - in: query
        name: athleteId
        schema:
          type: integer
        description: Filter by athlete id
    responses:
      '200':
        description: Training plans collection
        content:
          application/json:
            schema:
              type: object
              properties:
                trainingPlans:
                  type: array
                  items:
                    $ref: '#/components/schemas/TrainingPlan'
      '401':
        $ref: '#/components/responses/UnauthorizedError'
  post:
    tags: [Training Plans]
    summary: Create training plan
    security:
      - bearerAuth: []
    requestBody:
      required: true
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/TrainingPlanCreateRequest'
      responses:
        '201':
          description: Training plan created
          content:
            application/json:
              schema:
                type: object
                properties:
                  trainingPlan:
                    $ref: '#/components/schemas/TrainingPlan'
      '400':
        $ref: '#/components/responses/ValidationError'
      '401':
        $ref: '#/components/responses/UnauthorizedError'
      '403':
        $ref: '#/components/responses/ForbiddenError'
      '404':
        description: Athlete not found
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ErrorResponse'
            examples:
              missingAthlete:
                value:
                  message: Athlete not found
      '422':
        description: Payload violates business rules
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ErrorResponse'
            examples:
              invalid:
                value:
                  message: specialistId is required
/training-plans/{id}:
  get:
    tags: [Training Plans]
    summary: Get training plan
    security:
      - bearerAuth: []
    parameters:
      - $ref: '#/components/parameters/TrainingPlanId'
    responses:
      '200':
        description: Training plan data
        content:
          application/json:
            schema:
              type: object
              properties:
                trainingPlan:
                  $ref: '#/components/schemas/TrainingPlan'
      '401':
        $ref: '#/components/responses/UnauthorizedError'
      '403':
        description: Insufficient permissions to view training plan
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ErrorResponse'
            examples:
              forbidden:
                value:
                  message: Insufficient permissions to view this plan
      '404':
        description: Training plan not found
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ErrorResponse'
            examples:
              missing:
                value:
                  message: Training plan not found
  put:
    tags: [Training Plans]
    summary: Update training plan
    security:
      - bearerAuth: []
    parameters:
      - $ref: '#/components/parameters/TrainingPlanId'
    requestBody:
      required: true
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/TrainingPlanUpdateRequest'
    responses:
      '200':
        description: Updated training plan
        content:
          application/json:
            schema:
              type: object
              properties:
                trainingPlan:
                  $ref: '#/components/schemas/TrainingPlan'
      '400':
        $ref: '#/components/responses/ValidationError'
      '401':
        $ref: '#/components/responses/UnauthorizedError'
      '403':
        description: Insufficient permissions to update training plan
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ErrorResponse'
            examples:
              forbidden:
                value:
                  message: Insufficient permissions to update this plan
      '404':
        description: Training plan not found
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ErrorResponse'
            examples:
              missing:
                value:
                  message: Training plan not found
  delete:
    tags: [Training Plans]
    summary: Delete training plan
    security:
      - bearerAuth: []
    parameters:
      - $ref: '#/components/parameters/TrainingPlanId'
    responses:
      '204':
        description: Deleted
      '401':
        $ref: '#/components/responses/UnauthorizedError'
      '403':
        description: Insufficient permissions to delete training plan
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ErrorResponse'
            examples:
              forbidden:
                value:
                  message: Insufficient permissions to delete this plan
      '404':
        description: Training plan not found
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ErrorResponse'
            examples:
              missing:
                value:
                  message: Training plan not found
/nutrition-plans:
  get:
    tags: [Nutrition Plans]
    summary: List nutrition plans
    security:
      - bearerAuth: []
    parameters:
      - in: query
        name: athleteId
        schema:
          type: integer
        description: Filter by athlete id
    responses:
      '200':
        description: Nutrition plans collection
        content:
          application/json:
            schema:
              type: object
              properties:
                nutritionPlans:
                  type: array
                  items:
                    $ref: '#/components/schemas/NutritionPlan'
      '401':
        $ref: '#/components/responses/UnauthorizedError'
  post:
    tags: [Nutrition Plans]
    summary: Create nutrition plan
    security:
      - bearerAuth: []
    requestBody:
      required: true
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/NutritionPlanCreateRequest'
      responses:
        '201':
          description: Nutrition plan created
          content:
            application/json:
              schema:
                type: object
                properties:
                  nutritionPlan:
                    $ref: '#/components/schemas/NutritionPlan'
      '400':
        $ref: '#/components/responses/ValidationError'
      '401':
        $ref: '#/components/responses/UnauthorizedError'
      '403':
        $ref: '#/components/responses/ForbiddenError'
      '404':
        description: Athlete not found
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ErrorResponse'
            examples:
              missingAthlete:
                value:
                  message: Athlete not found
      '422':
        description: Payload violates business rules
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ErrorResponse'
            examples:
              invalid:
                value:
                  message: specialistId is required
/nutrition-plans/{id}:
  get:
    tags: [Nutrition Plans]
    summary: Get nutrition plan
    security:
      - bearerAuth: []
    parameters:
      - $ref: '#/components/parameters/NutritionPlanId'
    responses:
      '200':
        description: Nutrition plan data
        content:
          application/json:
            schema:
              type: object
              properties:
                nutritionPlan:
                  $ref: '#/components/schemas/NutritionPlan'
      '401':
        $ref: '#/components/responses/UnauthorizedError'
      '403':
        description: Insufficient permissions to view nutrition plan
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ErrorResponse'
            examples:
              forbidden:
                value:
                  message: Insufficient permissions to view this plan
      '404':
        description: Nutrition plan not found
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ErrorResponse'
            examples:
              missing:
                value:
                  message: Nutrition plan not found
  put:
    tags: [Nutrition Plans]
    summary: Update nutrition plan
    security:
      - bearerAuth: []
    parameters:
      - $ref: '#/components/parameters/NutritionPlanId'
    requestBody:
      required: true
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/NutritionPlanUpdateRequest'
    responses:
      '200':
        description: Updated nutrition plan
        content:
          application/json:
            schema:
              type: object
              properties:
                nutritionPlan:
                  $ref: '#/components/schemas/NutritionPlan'
      '400':
        $ref: '#/components/responses/ValidationError'
      '401':
        $ref: '#/components/responses/UnauthorizedError'
      '403':
        description: Insufficient permissions to update nutrition plan
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ErrorResponse'
            examples:
              forbidden:
                value:
                  message: Insufficient permissions to update this plan
      '404':
        description: Nutrition plan not found
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ErrorResponse'
            examples:
              missing:
                value:
                  message: Nutrition plan not found
  delete:
    tags: [Nutrition Plans]
    summary: Delete nutrition plan
    security:
      - bearerAuth: []
    parameters:
      - $ref: '#/components/parameters/NutritionPlanId'
    responses:
      '204':
        description: Deleted
      '401':
        $ref: '#/components/responses/UnauthorizedError'
      '403':
        description: Insufficient permissions to delete nutrition plan
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ErrorResponse'
            examples:
              forbidden:
                value:
                  message: Insufficient permissions to delete this plan
      '404':
        description: Nutrition plan not found
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ErrorResponse'
            examples:
              missing:
                value:
                  message: Nutrition plan not found
/messages:
  get:
    tags: [Messages]
    summary: List user messages
    security:
      - bearerAuth: []
    parameters:
      - in: query
        name: box
        schema:
          type: string
          enum: [inbox, outbox, all]
        description: Which mailbox to view (all available only for admins)
    responses:
      '200':
        description: Messages list
        content:
          application/json:
            schema:
              type: object
              properties:
                messages:
                  type: array
                  items:
                    $ref: '#/components/schemas/Message'
      '401':
        $ref: '#/components/responses/UnauthorizedError'
  post:
    tags: [Messages]
    summary: Send a message
    security:
      - bearerAuth: []
    requestBody:
      required: true
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/MessageCreateRequest'
      responses:
        '201':
          description: Message sent
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    $ref: '#/components/schemas/Message'
      '400':
        description: Invalid message request
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ErrorResponse'
            examples:
              validation:
                value:
                  message: Validation failed
                  hint: Please review the highlighted fields and try again.
              selfMessage:
                value:
                  message: Cannot send messages to yourself
      '401':
        $ref: '#/components/responses/UnauthorizedError'
      '404':
        description: Recipient not found
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ErrorResponse'
            examples:
              missingRecipient:
                value:
                  message: Recipient not found
/messages/{id}:
  get:
    tags: [Messages]
    summary: Get message details
    security:
      - bearerAuth: []
    parameters:
      - $ref: '#/components/parameters/MessageId'
    responses:
      '200':
        description: Message details
        content:
          application/json:
            schema:
              type: object
              properties:
                message:
                  $ref: '#/components/schemas/Message'
      '401':
        $ref: '#/components/responses/UnauthorizedError'
      '403':
        description: Attempt to access message without permission
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ErrorResponse'
            examples:
              forbidden:
                value:
                  message: You do not have access to this message
      '404':
        description: Message not found
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ErrorResponse'
            examples:
              missing:
                value:
                  message: Message not found
  delete:
    tags: [Messages]
    summary: Delete a message
    security:
      - bearerAuth: []
    parameters:
      - $ref: '#/components/parameters/MessageId'
    responses:
      '204':
        description: Deleted
      '401':
        $ref: '#/components/responses/UnauthorizedError'
      '403':
        description: Attempt to delete message without permission
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ErrorResponse'
            examples:
              forbidden:
                value:
                  message: You do not have permission to delete this message
      '404':
        description: Message not found
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ErrorResponse'
            examples:
              missing:
                value:
                  message: Message not found
/messages/{id}/read:
  patch:
    tags: [Messages]
    summary: Mark a message as read
    security:
      - bearerAuth: []
    parameters:
      - $ref: '#/components/parameters/MessageId'
    responses:
      '200':
        description: Message marked as read
        content:
          application/json:
            schema:
              type: object
              properties:
                message:
                  $ref: '#/components/schemas/Message'
      '401':
        $ref: '#/components/responses/UnauthorizedError'
      '403':
        description: Attempt to mark message without permission
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ErrorResponse'
            examples:
              forbidden:
                value:
                  message: Only the recipient can mark the message as read
      '404':
        description: Message not found
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ErrorResponse'
            examples:
              missing:
                value:
                  message: Message not found
components:
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
  parameters:
    AthleteId:
      name: id
      in: path
      required: true
      schema:
        type: integer
    TrainingPlanId:
      name: id
      in: path
      required: true
      schema:
        type: integer
    NutritionPlanId:
      name: id
      in: path
      required: true
      schema:
        type: integer
    MessageId:
      name: id
      in: path
      required: true
      schema:
        type: integer
  responses:
    UnauthorizedError:
      description: Authentication required
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
          examples:
            default:
              value:
                message: Authentication required
    ForbiddenError:
      description: Insufficient permissions
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
          examples:
            default:
              value:
                message: Insufficient permissions
    NotFoundError:
      description: Requested resource was not found
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
          examples:
            default:
              value:
                message: Resource not found
    ConflictError:
      description: Resource already exists
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
          examples:
            default:
              value:
                message: Conflict
    ValidationError:
      description: Payload validation failed
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ValidationErrorResponse'
          examples:
            default:
              value:
                message: Validation failed
                hint: Please review the highlighted fields and try again.
                details:
                  - field: password
                    message: "Password length must be at least 8 characters long"
    UnprocessableEntityError:
      description: Payload could not be processed due to business rules
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
          examples:
            default:
              value:
                message: specialistId is required
  schemas:
    UserSummary:
      type: object
      properties:
        id:
          type: integer
        email:
          type: string
        firstName:
          type: string
        lastName:
          type: string
        role:
          type: string
          enum: [ATHLETE, SPECIALIST, ADMIN]
    RegisterRequest:
      type: object
      required: [email, password, firstName, lastName]
      properties:
        email:
          type: string
          format: email
        password:
          type: string
          format: password
        firstName:
          type: string
        lastName:
          type: string
        role:
          type: string
          enum: [ATHLETE, SPECIALIST, ADMIN]
        athleteProfile:
          type: object
          properties:
            dateOfBirth:
              type: string
              format: date
            heightCm:
              type: integer
            weightKg:
              type: number
            restingHeartRate:
              type: integer
            bio:
              type: string
    LoginRequest:
      type: object
      required: [email, password]
      properties:
        email:
          type: string
          format: email
        password:
          type: string
          format: password
    RefreshRequest:
      type: object
      required: [refreshToken]
      properties:
        refreshToken:
          type: string
    Tokens:
      type: object
      properties:
        accessToken:
          type: string
        refreshToken:
          type: string
    AuthResponse:
      type: object
      properties:
        user:
          $ref: '#/components/schemas/UserSummary'
        tokens:
          $ref: '#/components/schemas/Tokens'
      RefreshResponse:
        type: object
        properties:
          accessToken:
            type: string
          refreshToken:
            type: string
      ErrorDetail:
        type: object
        properties:
          field:
            type: string
            description: Field path related to the validation error
          message:
            type: string
          type:
            type: string
            description: Joi validation error code
      ErrorResponse:
        type: object
        properties:
          message:
            type: string
          details:
            type: array
            items:
              $ref: '#/components/schemas/ErrorDetail'
          hint:
            type: string
        additionalProperties: false
      ValidationErrorResponse:
        allOf:
          - $ref: '#/components/schemas/ErrorResponse'
      Athlete:
        type: object
        properties:
          id:
            type: integer
        userId:
          type: integer
        dateOfBirth:
          type: string
          format: date
        heightCm:
          type: integer
        weightKg:
          type: number
        restingHeartRate:
          type: integer
        bio:
          type: string
        user:
          $ref: '#/components/schemas/UserSummary'
    AthleteExpanded:
      allOf:
        - $ref: '#/components/schemas/Athlete'
        - type: object
          properties:
            trainingPlans:
              type: array
              items:
                $ref: '#/components/schemas/TrainingPlan'
            nutritionPlans:
              type: array
              items:
                $ref: '#/components/schemas/NutritionPlan'
    AthleteCreateRequest:
      type: object
      required: [userId]
      properties:
        userId:
          type: integer
        dateOfBirth:
          type: string
          format: date
        heightCm:
          type: integer
        weightKg:
          type: number
        restingHeartRate:
          type: integer
        bio:
          type: string
    AthleteUpdateRequest:
      type: object
      properties:
        dateOfBirth:
          type: string
          format: date
        heightCm:
          type: integer
        weightKg:
          type: number
        restingHeartRate:
          type: integer
        bio:
          type: string
    TrainingPlan:
      type: object
      properties:
        id:
          type: integer
        athleteId:
          type: integer
        specialistId:
          type: integer
        title:
          type: string
        description:
          type: string
        startDate:
          type: string
          format: date
        endDate:
          type: string
          format: date
        intensityLevel:
          type: string
          enum: [LOW, MEDIUM, HIGH]
        athlete:
          $ref: '#/components/schemas/Athlete'
        specialist:
          $ref: '#/components/schemas/UserSummary'
    TrainingPlanCreateRequest:
      type: object
      required: [athleteId, title, startDate, endDate, intensityLevel]
      properties:
        athleteId:
          type: integer
        specialistId:
          type: integer
        title:
          type: string
        description:
          type: string
        startDate:
          type: string
          format: date
        endDate:
          type: string
          format: date
        intensityLevel:
          type: string
          enum: [LOW, MEDIUM, HIGH]
    TrainingPlanUpdateRequest:
      allOf:
        - $ref: '#/components/schemas/TrainingPlanCreateRequest'
    NutritionPlan:
      type: object
      properties:
        id:
          type: integer
        athleteId:
          type: integer
        specialistId:
          type: integer
        title:
          type: string
        description:
          type: string
        caloriesPerDay:
          type: integer
        macronutrientRatio:
          type: object
          properties:
            carbohydrates:
              type: number
            protein:
              type: number
            fat:
              type: number
        startDate:
          type: string
          format: date
        endDate:
          type: string
          format: date
        athlete:
          $ref: '#/components/schemas/Athlete'
        specialist:
          $ref: '#/components/schemas/UserSummary'
    NutritionPlanCreateRequest:
      type: object
      required: [athleteId, title, startDate, endDate]
      properties:
        athleteId:
          type: integer
        specialistId:
          type: integer
        title:
          type: string
        description:
          type: string
        caloriesPerDay:
          type: integer
        macronutrientRatio:
          type: object
          properties:
            carbohydrates:
              type: number
            protein:
              type: number
            fat:
              type: number
        startDate:
          type: string
          format: date
        endDate:
          type: string
          format: date
    NutritionPlanUpdateRequest:
      allOf:
        - $ref: '#/components/schemas/NutritionPlanCreateRequest'
    Message:
      type: object
      properties:
        id:
          type: integer
        senderId:
          type: integer
        recipientId:
          type: integer
        subject:
          type: string
        body:
          type: string
        readAt:
          type: string
          format: date-time
        createdAt:
          type: string
          format: date-time
        sender:
          $ref: '#/components/schemas/UserSummary'
        recipient:
          $ref: '#/components/schemas/UserSummary'
    MessageCreateRequest:
      type: object
      required: [recipientId, subject, body]
      properties:
        recipientId:
          type: integer
        subject:
          type: string
        body:
          type: string
